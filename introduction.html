<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from site/markdown/introduction.md at 2023-04-28
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Asynchronous Game Query Library &#x2013; Introduction</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.10.0.min.js"></script>

  </head>
  <body class="topBarEnabled">
    <a href="https://github.com/ribasco/async-gamequery-lib">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="introduction.html" title="Introduction">Introduction</a></li>
            <li><a href="configuration.html" title="Configuration">Configuration</a></li>
            <li><a href="apidocs/" title="Java Docs">Java Docs</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="examples/webapi_general_usage.html" title="General Web API Usage">General Web API Usage</a></li>
            <li><a href="examples/master_query_example.html" title="Master Server Query">Master Server Query</a></li>
            <li><a href="examples/source_query_example.html" title="Source Server Queries">Source Server Queries</a></li>
            <li><a href="examples/source_rcon_example.html" title="Source RCON">Source RCON</a></li>
            <li><a href="examples/source_log_example.html" title="Source Log Listener">Source Log Listener</a></li>
            <li><a href="examples/webapi_coc_example.html" title="Clash of Clans Web API">Clash of Clans Web API</a></li>
            <li><a href="examples/webapi_csgo_example.html" title="CS:GO Web API">CS:GO Web API</a></li>
            <li><a href="examples/webapi_dota2_example.html" title="Dota 2 Web API">Dota 2 Web API</a></li>
            <li><a href="examples/webapi_steam_example.html" title="Steam Web API">Steam Web API</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="agql-lib-core/index.html" title="AGQL - Core">AGQL - Core</a></li>
            <li><a href="agql-lib-examples/index.html" title="AGQL - Examples">AGQL - Examples</a></li>
            <li><a href="protocols/supercell/clashofclans/agql-coc-webapi/index.html" title="AGQL - Supercell - COC WebAPI">AGQL - Supercell - COC WebAPI</a></li>
            <li><a href="protocols/valve/source/agql-source-query/index.html" title="AGQL - Valve - Source Query">AGQL - Valve - Source Query</a></li>
            <li><a href="protocols/valve/source/agql-source-rcon/index.html" title="AGQL - Valve - Source RCON">AGQL - Valve - Source RCON</a></li>
            <li><a href="protocols/valve/source/agql-source-log/index.html" title="AGQL - Valve - Source Logging Service">AGQL - Valve - Source Logging Service</a></li>
            <li><a href="protocols/supercell/clashofclans/agql-csgo-webapi/index.html" title="AGQL - Valve - CS:GO WebAPI">AGQL - Valve - CS:GO WebAPI</a></li>
            <li><a href="protocols/supercell/clashofclans/agql-dota2-webapi/index.html" title="AGQL - Valve - Dota 2 WebAPI">AGQL - Valve - Dota 2 WebAPI</a></li>
            <li><a href="protocols/valve/steam/agql-steam-master/index.html" title="AGQL - Valve - Steam Master Query">AGQL - Valve - Steam Master Query</a></li>
            <li><a href="protocols/supercell/clashofclans/agql-steam-webapi/index.html" title="AGQL - Valve - Steam Web API">AGQL - Valve - Steam Web API</a></li>
            <li><a href="agql/index.html" title="AGQL - Aggregate">AGQL - Aggregate</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="dependency-management.html" title="Dependency Management">Dependency Management</a></li>
                  <li><a href="distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="index.html" title="About">About</a></li>
                  <li><a href="issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li><a href="modules.html" title="Project Modules">Project Modules</a></li>
                  <li><a href="plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="summary.html" title="Summary">Summary</a></li>
                  <li><a href="team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="changelog.html" title="Change Log">Change Log</a></li>
                  <li><a href="file-activity.html" title="File Activity">File Activity</a></li>
                  <li><a href="dev-activity.html" title="Developer Activity">Developer Activity</a></li>
                  <li><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="./" id="bannerLeft"><img src="images/agql-banner-left-simple.png"  alt="Asynchronous Game Query Library"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2023-04-28</li>
      <li id="projectVersion" class="pull-right">Version: 1.2.1</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li class="active"><a href="#"><span class="none"></span>Introduction</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="apidocs/" title="Java Docs"><span class="none"></span>Java Docs</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="examples/webapi_general_usage.html" title="General Web API Usage"><span class="none"></span>General Web API Usage</a></li>
    <li><a href="examples/master_query_example.html" title="Master Server Query"><span class="none"></span>Master Server Query</a></li>
    <li><a href="examples/source_query_example.html" title="Source Server Queries"><span class="none"></span>Source Server Queries</a></li>
    <li><a href="examples/source_rcon_example.html" title="Source RCON"><span class="none"></span>Source RCON</a></li>
    <li><a href="examples/source_log_example.html" title="Source Log Listener"><span class="none"></span>Source Log Listener</a></li>
    <li><a href="examples/webapi_coc_example.html" title="Clash of Clans Web API"><span class="none"></span>Clash of Clans Web API</a></li>
    <li><a href="examples/webapi_csgo_example.html" title="CS:GO Web API"><span class="none"></span>CS:GO Web API</a></li>
    <li><a href="examples/webapi_dota2_example.html" title="Dota 2 Web API"><span class="none"></span>Dota 2 Web API</a></li>
    <li><a href="examples/webapi_steam_example.html" title="Steam Web API"><span class="none"></span>Steam Web API</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="agql-lib-core/index.html" title="AGQL - Core"><span class="none"></span>AGQL - Core</a></li>
    <li><a href="agql-lib-examples/index.html" title="AGQL - Examples"><span class="none"></span>AGQL - Examples</a></li>
    <li><a href="protocols/supercell/clashofclans/agql-coc-webapi/index.html" title="AGQL - Supercell - COC WebAPI"><span class="none"></span>AGQL - Supercell - COC WebAPI</a></li>
    <li><a href="protocols/valve/source/agql-source-query/index.html" title="AGQL - Valve - Source Query"><span class="none"></span>AGQL - Valve - Source Query</a></li>
    <li><a href="protocols/valve/source/agql-source-rcon/index.html" title="AGQL - Valve - Source RCON"><span class="none"></span>AGQL - Valve - Source RCON</a></li>
    <li><a href="protocols/valve/source/agql-source-log/index.html" title="AGQL - Valve - Source Logging Service"><span class="none"></span>AGQL - Valve - Source Logging Service</a></li>
    <li><a href="protocols/supercell/clashofclans/agql-csgo-webapi/index.html" title="AGQL - Valve - CS:GO WebAPI"><span class="none"></span>AGQL - Valve - CS:GO WebAPI</a></li>
    <li><a href="protocols/supercell/clashofclans/agql-dota2-webapi/index.html" title="AGQL - Valve - Dota 2 WebAPI"><span class="none"></span>AGQL - Valve - Dota 2 WebAPI</a></li>
    <li><a href="protocols/valve/steam/agql-steam-master/index.html" title="AGQL - Valve - Steam Master Query"><span class="none"></span>AGQL - Valve - Steam Master Query</a></li>
    <li><a href="protocols/supercell/clashofclans/agql-steam-webapi/index.html" title="AGQL - Valve - Steam Web API"><span class="none"></span>AGQL - Valve - Steam Web API</a></li>
    <li><a href="agql/index.html" title="AGQL - Aggregate"><span class="none"></span>AGQL - Aggregate</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Maven" class="builtBy"><img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="http://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="builtBy"><img class="builtBy"  alt="JProfiler" src="https://www.ej-technologies.com/images/product_banners/jprofiler_small.png"    /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Introduction"></a>Introduction</h2>
<ol style="list-style-type: decimal">

<li><a href="#features">Features</a></li>
<li><a href="#implementations">Implementations</a>
<ol style="list-style-type: decimal">

<li><a href="#web-api">Web API</a></li>
<li><a href="#server-queries">Server Queries</a></li>
<li><a href="#others">Others</a></li>
</ol>
</li>
<li><a href="#best-practices">Best Practices</a></li>
</ol><section>
<h3><a name="Features"></a>Features</h3>
<ul>

<li>Simple and easy to use API.</li>
<li>All operations are asynchronous. Every request returns a <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html">CompletableFuture</a></li>
<li>It's fast and capable of handling large transactions.</li>
<li>Resource efficient
<ul>

<li>Uses netty's off-heap <a class="externalLink" href="https://netty.io/wiki/using-as-a-generic-library.html">pooled direct buffers</a> (Helps reduce GC pressure for high volume/throughput transactions)</li>
<li>Built-in thread and connection pooling support. Takes advantage of netty's <a class="externalLink" href="https://netty.io/4.1/api/io/netty/channel/EventLoop.html">event loop</a> model.</li>
<li>Makes use of native transports (if available) for increased performance (e.g. <a class="externalLink" href="https://man7.org/linux/man-pages/man7/epoll.7.html">epoll</a>, <a class="externalLink" href="https://developer.apple.com/library/archive/documentation/System/Conceptual/ManPages_iPhoneOS/man2/kqueue.2.html">kqueue</a>). Java's NIO is used by default.</li>
</ul>
</li>
<li>Highly Configurable. Clients can be configured to satisfy your requirements (e.g. providing a custom executor, adjusting rate limit parameters, selecting connection pool strategy etc)</li>
<li>Transactions are <a class="externalLink" href="https://failsafe.dev/">Failsafe</a> (except web api). Resilience <a class="externalLink" href="https://failsafe.dev/policies/">policies</a> have been implemented to guarantee the delivery and receipt of queries. Below are the policies available by default.
<ul>

<li><b><a class="externalLink" href="https://failsafe.dev/retry/">Retry Policy</a>:</b> A failed query is re-attempted until a response has either been received or the maximum number attempts has been reached.</li>
<li><b><a class="externalLink" href="https://failsafe.dev/rate-limiter/">Rate Limiter Policy</a>:</b> This prevents overloading the servers by sending requests too fast causing the requests to timeout due to rate limits being exceeded.</li>
<li><b><a class="externalLink" href="https://failsafe.dev/circuit-breaker/">Circuit Breaker Policy</a>:</b> When certain number of failures reach the threshold, the library will transition to an &#x201c;OPEN&#x201d; state, temporarily rejecting new requests.</li>
</ul>
</li>
</ul></section><section>
<h3><a name="Implementations"></a>Implementations</h3><section><section>
<h5><a name="Web_API"></a>Web API</h5>
<p>A list of supported web service implementations</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th><b>Vendor</b></th>
<th><b>Module</b></th>
<th><b>Supported Interfaces</b></th></tr>
</thead><tbody>

<tr class="b">
<td align="left">Supercell</td>
<td>Clash of Clans (Deprecated)</td>
<td>Clans, Leagues, Locations, Players</td></tr>
<tr class="a">
<td align="left">Valve</td>
<td>Steam</td>
<td>Apps, Community, Econ, Economy, Player Service, User, User Stats, Store Front, Game Servers, Store Service, Web API Util</td></tr>
<tr class="b">
<td align="left">Valve</td>
<td>Dota 2</td>
<td>Econ, Fantasy, Match, Stats, Stream, Teams</td></tr>
<tr class="a">
<td align="left">Valve</td>
<td>CS:GO</td>
<td>Servers</td></tr>
</tbody>
</table></section><section>
<h5><a name="Server_Queries"></a>Server Queries</h5>
<p>A list of supported game server query protocols</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th><b>Vendor</b></th>
<th><b>Module</b></th>
<th><b>Description</b></th></tr>
</thead><tbody>

<tr class="b">
<td align="left">Valve</td>
<td>Source Query</td>
<td>Implementations of the A2S_INFO, A2S_PLAYERS, A2S_RULES and A2S_SERVERQUERY_GETCHALLENGE protocols</td></tr>
<tr class="a">
<td align="left">Valve</td>
<td>Source RCON</td>
<td>TCP/IP-based communication protocol used by Source Dedicated Server</td></tr>
</tbody>
</table></section><section>
<h5><a name="Others"></a>Others</h5>
<p>Other supported protocols</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th><b>Vendor</b></th>
<th><b>Module Name</b></th>
<th><b>Description</b></th></tr>
</thead><tbody>

<tr class="b">
<td align="left">Valve</td>
<td>Source Log Listener</td>
<td>A standalone service which listens to source server log events via UDP</td></tr>
<tr class="a">
<td align="left">Valve</td>
<td>Master Server Query Protocol</td>
<td>Legacy protocol to query valve master servers</td></tr>
</tbody>
</table></section></section></section><section>
<h3><a name="Best_Practices"></a>Best Practices</h3>
<p>Keep in mind that you should <b>NEVER BLOCK</b> the thread of your completion handlers. If you have to perform synchronization or a long running operation within your handlers/callbacks, then it is highly recommended that you execute them asynchronously, otherwise your application may
hang indefinitely.
Java's <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html">CompletableFuture</a> provides a convenient way of executing your handlers asynchronously. Refer to the working examples below.</p>
<p><span style="color:red; text-transform: uppercase;"><b>Not Recommended</b></span></p>
<p>In this example, a command query <code>cvarlist</code> is sent to the server. The response is then parsed and broken down into a list of <code>ConVar</code> objects by the completion handler <code>parseOutput()</code>. Notice that in <code>parseOutput()</code>, an additional request <code>client.execute()</code> is sent for each entry followed by a call to <code>join()</code>, which blocks the current thread until a response is received. Avoid blocking the event-loop thread as this could cause the application to hang indefinitely.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.util.concurrent.CompletableFuture;
import java.util.function.Function;

public class NotRecommededExample {

    private static final Pattern cvarlistParser = Pattern.compile(&quot;(?&lt;name&gt;\\S+)\\s*:\\s?(?&lt;value&gt;\\S+)?\\s*:(?&lt;group&gt;.*):(?&lt;description&gt;.*)$&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);

    private static class ConVar {

        private final String name;

        private final String value;

        private final String[] types;

        private final String description;

        private ConVar(String name, String value, String[] types, String description) {
            this.name = name;
            this.value = value;
            this.types = types;
            this.description = description;
        }

        private String getName() {
            return name;
        }

        private String getValue() {
            return value;
        }

        private String[] getTypes() {
            return types;
        }

        private String getDescription() {
            return description;
        }
    }

    public static void main(String[] args) throws Exception {
        new RconTest().run();
    }

    private void run() throws Exception {
        InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27016);
        try (SourceRconClient client = new SourceRconClient()) {
            //authenticate
            SourceRconAuthResponse authResponse = client.authenticate(address, &quot;&lt;password_here&gt;&quot;.getBytes()).join();
            if (!authResponse.isAuthenticated())
                throw new Exception(authResponse.getReason());

            //Example
            //1. execute 'cvarlist'
            //2. parse 'cvarlist' output with regex
            //3. transform each convar into ConVar class and add to list
            //4. return list
            List&lt;ConVar&gt; cvarList = client.execute(address, &quot;cvarlist&quot;) //get cvarlist from server
                                          .thenApply(out -&gt; parseOutput(client, out)) //parse the cvarlist output and transform it to a List of ConVar objects
                                          .join(); //block until the operation is complete

            System.out.printf(&quot;Processed a total of %d cvars%n&quot;, cvarList.size());
        }
    }

    private List&lt;ConVar&gt; parseOutput(SourceRconClient client, SourceRconCmdResponse response) {
        String cvarlistOutput = response.getResult();
        Matcher matcher = cvarlistParser.matcher(cvarlistOutput);
        List&lt;ConVar&gt; conVarList = new ArrayList&lt;&gt;();

        while (matcher.find()) {
            String name = matcher.group(&quot;name&quot;);
            String value = matcher.group(&quot;value&quot;);
            String[] types = StringUtils.splitPreserveAllTokens(matcher.group(&quot;group&quot;), &quot;,&quot;);
            String description = matcher.group(&quot;description&quot;);
            ConVar conVar = new ConVar(name, value, types, description);
            conVarList.add(conVar);
            Console.colorize(true).green(&quot;[%s]&quot;, Thread.currentThread().getName()).white(&quot;: %s = %s&quot;, conVar.getName(), conVar.getValue()).println();

            //Obtain additional information about the cvar via calling 'help &lt;cvar name&gt;' (Calling join() will block the current event loop thread) 
            SourceRconCmdResponse helpResponse = client.execute(response.getAddress(), String.format(&quot;help %s&quot;, name.trim())).join();

            //parse cvarHelpRes and update ConVar
            String helpOutput = helpResponse.getResult();
            //parse helpOutput here....
        }
        return conVarList;
    }
}
</code></pre></div>
<p><span style="color:green; text-transform: uppercase;"><b>Recommended</b></span></p>
<p><b>Solution 1:</b> The easiest solution would be to swap <code>thenApply</code> with <code>thenApplyAsync</code>. This will ensure that <code>parseOutput</code> will be executed on a different thread and most importantly will not block the current event-loop thread. You also can specify a <a class="externalLink" href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#thenApplyAsync-java.util.function.Function-">custom executor</a> if needed.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.util.concurrent.CompletableFuture;
import java.util.function.Function;

public class RecommendedExampleOne {

    private static final Pattern cvarlistParser = Pattern.compile(&quot;(?&lt;name&gt;\\S+)\\s*:\\s?(?&lt;value&gt;\\S+)?\\s*:(?&lt;group&gt;.*):(?&lt;description&gt;.*)$&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);

    private static class ConVar {

        private final String name;

        private final String value;

        private final String[] types;

        private final String description;

        private ConVar(String name, String value, String[] types, String description) {
            this.name = name;
            this.value = value;
            this.types = types;
            this.description = description;
        }

        private String getName() {
            return name;
        }

        private String getValue() {
            return value;
        }

        private String[] getTypes() {
            return types;
        }

        private String getDescription() {
            return description;
        }
    }

    public static void main(String[] args) throws Exception {
        new RconTest().run();
    }

    private void run() throws Exception {
        InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27016);
        try (SourceRconClient client = new SourceRconClient()) {
            //authenticate
            SourceRconAuthResponse authResponse = client.authenticate(address, &quot;&lt;password_here&gt;&quot;.getBytes()).join();
            if (!authResponse.isAuthenticated())
                throw new Exception(authResponse.getReason());

            //Example
            //1. execute 'cvarlist'
            //2. parse 'cvarlist' output with regex
            //3. transform each convar into ConVar class and add to list
            //4. return list
            List&lt;ConVar&gt; cvarList = client.execute(address, &quot;cvarlist&quot;)
                                          .thenApplyAsync(out -&gt; parseOutput(client, out)) //THIS IS A LONG RUNNING TASK. Call thenApplyAsync() so it wont block the event-loop.
                                          .join(); //block until the operation is complete

            System.out.printf(&quot;Processed a total of %d cvars%n&quot;, cvarList.size());
        }
    }

    private List&lt;ConVar&gt; parseOutput(SourceRconClient client, SourceRconCmdResponse response) {
        String cvarlistOutput = response.getResult();
        Matcher matcher = cvarlistParser.matcher(cvarlistOutput);
        List&lt;ConVar&gt; conVarList = new ArrayList&lt;&gt;();

        while (matcher.find()) {
            String name = matcher.group(&quot;name&quot;);
            String value = matcher.group(&quot;value&quot;);
            String[] types = StringUtils.splitPreserveAllTokens(matcher.group(&quot;group&quot;), &quot;,&quot;);
            String description = matcher.group(&quot;description&quot;);
            ConVar conVar = new ConVar(name, value, types, description);
            conVarList.add(conVar);
            Console.colorize(true).green(&quot;[%s]&quot;, Thread.currentThread().getName()).white(&quot;: %s = %s&quot;, conVar.getName(), conVar.getValue()).println();

            //Obtain additional information about the cvar via calling 'help &lt;cvar name&gt;' (Calling join() will block the current event loop thread) 
            SourceRconCmdResponse helpResponse = client.execute(response.getAddress(), String.format(&quot;help %s&quot;, name.trim())).join();

            //parse cvarHelpRes and update ConVar
            String helpOutput = helpResponse.getResult();
            //parse helpOutput here....
        }
        return conVarList;
    }
}
</code></pre></div>
<p>The problem with this approach is that it's not efficient. A closer look at the <code>parseOutput</code> implementation, shows that it is calling <code>client.execute(...).join()</code> synchronously and will block the current thread until the method completes. The call to <code>join()</code> blocks the current thread until a response is received. A slightly better approach would be to execute all these additional requests asynchronously then use a synchronization barrier (e.g. <code>CountDownLatch</code> or <code>Phaser</code>) to block until all
requests have been fulfilled. In this example, we will
use <code>Phaser</code> since we do not yet know how many cvars we are going to process.</p>
<p><b>Solution 2:</b> Update <code>parseOutput</code> implementation so that the requests for <code>help &lt;cvar&gt;</code> are all executed asynchronously then wait until all requests have been fulfilled.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.util.concurrent.CompletableFuture;
import java.util.function.Function;

public class RecommendedExampleTwo {

    private static final Pattern cvarlistParser = Pattern.compile(&quot;(?&lt;name&gt;\\S+)\\s*:\\s?(?&lt;value&gt;\\S+)?\\s*:(?&lt;group&gt;.*):(?&lt;description&gt;.*)$&quot;, Pattern.CASE_INSENSITIVE | Pattern.MULTILINE);

    private static class ConVar {

        private final String name;

        private final String value;

        private final String[] types;

        private final String description;

        private ConVar(String name, String value, String[] types, String description) {
            this.name = name;
            this.value = value;
            this.types = types;
            this.description = description;
        }

        private String getName() {
            return name;
        }

        private String getValue() {
            return value;
        }

        private String[] getTypes() {
            return types;
        }

        private String getDescription() {
            return description;
        }
    }

    public static void main(String[] args) throws Exception {
        new RconTest().run();
    }

    private void run() throws Exception {
        InetSocketAddress address = new InetSocketAddress(&quot;192.168.50.6&quot;, 27016);
        try (SourceRconClient client = new SourceRconClient()) {
            //authenticate
            SourceRconAuthResponse authResponse = client.authenticate(address, &quot;AzCgBF6E7ddY6wE5XFrfdv3Rsw9XcQoY&quot;.getBytes()).join();//&lt;password_here&gt;
            if (!authResponse.isAuthenticated())
                throw new Exception(authResponse.getReason());

            //Example
            //1. execute 'cvarlist'
            //2. parse 'cvarlist' output with regex
            //3. transform each convar into ConVar class and add to list
            //4. return list
            List&lt;ConVar&gt; cvarList = client.execute(address, &quot;cvarlist&quot;).thenApplyAsync(out -&gt; parseOutput(client, out)).join();
            System.out.printf(&quot;Processed a total of %d cvars%n&quot;, cvarList.size());
            System.out.println(&quot;Exiting application&quot;);
        }
    }

    //Here is an updated implementation using Phaser sync barrier
    private List&lt;ConVar&gt; parseOutput(SourceRconClient client, SourceRconCmdResponse response) {
        String cvarlistOutput = response.getResult();
        Matcher matcher = cvarlistParser.matcher(cvarlistOutput);
        List&lt;ConVar&gt; conVarList = new ArrayList&lt;&gt;();
        Phaser phaser = new Phaser();
        phaser.register();
        while (matcher.find()) {
            String name = matcher.group(&quot;name&quot;);
            String value = matcher.group(&quot;value&quot;);
            String[] types = StringUtils.splitPreserveAllTokens(matcher.group(&quot;group&quot;), &quot;,&quot;);
            String description = matcher.group(&quot;description&quot;);
            ConVar conVar = new ConVar(name, value, types, description);
            conVarList.add(conVar);
            phaser.register();
            //Obtain cvar information via 'help'
            client.execute(response.getAddress(), String.format(&quot;help %s&quot;, name.trim())).thenCombine(CompletableFuture.completedFuture(conVar), (res, cvar) -&gt; {
                String helpOutput = res.getResult();
                //TODO: parse helpOutput and update cvar
                return cvar;
            }).whenComplete((conVar1, throwable) -&gt; phaser.arriveAndDeregister());
        }
        phaser.arriveAndAwaitAdvance();
        return conVarList;
    }
}
</code></pre></div></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p>Site Chain Logo - By Mdowdell (Own work) [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
