<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from site/markdown/examples/source_rcon_example.md at 2022-05-02
 | Rendered using Apache Maven Fluido Skin 1.10.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>Asynchronous Game Query Library &#x2013; Source RCON</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.10.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.10.0.min.js"></script>

  </head>
  <body class="topBarEnabled">
    <a href="https://github.com/ribasco/async-gamequery-lib">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
        <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
            <ul class="nav">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../introduction.html" title="Introduction">Introduction</a></li>
            <li><a href="../configuration.html" title="Configuration">Configuration</a></li>
            <li><a href="../apidocs/" title="Java Docs">Java Docs</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../examples/webapi_general_usage.html" title="General Web API Usage">General Web API Usage</a></li>
            <li><a href="../examples/master_query_example.html" title="Master Server Query">Master Server Query</a></li>
            <li><a href="../examples/source_query_example.html" title="Source Server Queries">Source Server Queries</a></li>
            <li><a href="../examples/source_rcon_example.html" title="Source RCON">Source RCON</a></li>
            <li><a href="../examples/source_log_example.html" title="Source Log Listener">Source Log Listener</a></li>
            <li><a href="../examples/webapi_coc_example.html" title="Clash of Clans Web API">Clash of Clans Web API</a></li>
            <li><a href="../examples/webapi_csgo_example.html" title="CS:GO Web API">CS:GO Web API</a></li>
            <li><a href="../examples/webapi_dota2_example.html" title="Dota 2 Web API">Dota 2 Web API</a></li>
            <li><a href="../examples/webapi_steam_example.html" title="Steam Web API">Steam Web API</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../agql-lib-core/index.html" title="AGQL - Core">AGQL - Core</a></li>
            <li><a href="../agql-lib-examples/index.html" title="AGQL - Examples">AGQL - Examples</a></li>
            <li><a href="../protocols/supercell/clashofclans/agql-coc-webapi/index.html" title="AGQL - Supercell - COC WebAPI">AGQL - Supercell - COC WebAPI</a></li>
            <li><a href="../protocols/valve/source/agql-source-query/index.html" title="AGQL - Valve - Source Query">AGQL - Valve - Source Query</a></li>
            <li><a href="../protocols/valve/source/agql-source-rcon/index.html" title="AGQL - Valve - Source RCON">AGQL - Valve - Source RCON</a></li>
            <li><a href="../protocols/valve/source/agql-source-log/index.html" title="AGQL - Valve - Source Logging Service">AGQL - Valve - Source Logging Service</a></li>
            <li><a href="../protocols/supercell/clashofclans/agql-csgo-webapi/index.html" title="AGQL - Valve - CS:GO WebAPI">AGQL - Valve - CS:GO WebAPI</a></li>
            <li><a href="../protocols/supercell/clashofclans/agql-dota2-webapi/index.html" title="AGQL - Valve - Dota 2 WebAPI">AGQL - Valve - Dota 2 WebAPI</a></li>
            <li><a href="../protocols/valve/steam/agql-steam-master/index.html" title="AGQL - Valve - Steam Master Query">AGQL - Valve - Steam Master Query</a></li>
            <li><a href="../protocols/supercell/clashofclans/agql-steam-webapi/index.html" title="AGQL - Valve - Steam Web API">AGQL - Valve - Steam Web API</a></li>
            <li><a href="../agql/index.html" title="AGQL - Aggregate">AGQL - Aggregate</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="../project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="../ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="../dependency-convergence.html" title="Dependency Convergence">Dependency Convergence</a></li>
                  <li><a href="../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="../dependency-management.html" title="Dependency Management">Dependency Management</a></li>
                  <li><a href="../distribution-management.html" title="Distribution Management">Distribution Management</a></li>
                  <li><a href="../index.html" title="About">About</a></li>
                  <li><a href="../issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="../licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li><a href="../modules.html" title="Project Modules">Project Modules</a></li>
                  <li><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="../plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="../scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="../summary.html" title="Summary">Summary</a></li>
                  <li><a href="../team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="../project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="../changelog.html" title="Change Log">Change Log</a></li>
                  <li><a href="../file-activity.html" title="File Activity">File Activity</a></li>
                  <li><a href="../dev-activity.html" title="Developer Activity">Developer Activity</a></li>
                  <li><a href="../apidocs/index.html" title="Javadoc">Javadoc</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href=".././" id="bannerLeft"><img src="../images/agql-banner-left-simple.png"  alt="Asynchronous Game Query Library"/></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2022-05-02</li>
      <li id="projectVersion" class="pull-right">Version: 1.0.0-SNAPSHOT</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="../introduction.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="../configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="../apidocs/" title="Java Docs"><span class="none"></span>Java Docs</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="../examples/webapi_general_usage.html" title="General Web API Usage"><span class="none"></span>General Web API Usage</a></li>
    <li><a href="../examples/master_query_example.html" title="Master Server Query"><span class="none"></span>Master Server Query</a></li>
    <li><a href="../examples/source_query_example.html" title="Source Server Queries"><span class="none"></span>Source Server Queries</a></li>
    <li class="active"><a href="#"><span class="none"></span>Source RCON</a></li>
    <li><a href="../examples/source_log_example.html" title="Source Log Listener"><span class="none"></span>Source Log Listener</a></li>
    <li><a href="../examples/webapi_coc_example.html" title="Clash of Clans Web API"><span class="none"></span>Clash of Clans Web API</a></li>
    <li><a href="../examples/webapi_csgo_example.html" title="CS:GO Web API"><span class="none"></span>CS:GO Web API</a></li>
    <li><a href="../examples/webapi_dota2_example.html" title="Dota 2 Web API"><span class="none"></span>Dota 2 Web API</a></li>
    <li><a href="../examples/webapi_steam_example.html" title="Steam Web API"><span class="none"></span>Steam Web API</a></li>
   <li class="nav-header">Modules</li>
    <li><a href="../agql-lib-core/index.html" title="AGQL - Core"><span class="none"></span>AGQL - Core</a></li>
    <li><a href="../agql-lib-examples/index.html" title="AGQL - Examples"><span class="none"></span>AGQL - Examples</a></li>
    <li><a href="../protocols/supercell/clashofclans/agql-coc-webapi/index.html" title="AGQL - Supercell - COC WebAPI"><span class="none"></span>AGQL - Supercell - COC WebAPI</a></li>
    <li><a href="../protocols/valve/source/agql-source-query/index.html" title="AGQL - Valve - Source Query"><span class="none"></span>AGQL - Valve - Source Query</a></li>
    <li><a href="../protocols/valve/source/agql-source-rcon/index.html" title="AGQL - Valve - Source RCON"><span class="none"></span>AGQL - Valve - Source RCON</a></li>
    <li><a href="../protocols/valve/source/agql-source-log/index.html" title="AGQL - Valve - Source Logging Service"><span class="none"></span>AGQL - Valve - Source Logging Service</a></li>
    <li><a href="../protocols/supercell/clashofclans/agql-csgo-webapi/index.html" title="AGQL - Valve - CS:GO WebAPI"><span class="none"></span>AGQL - Valve - CS:GO WebAPI</a></li>
    <li><a href="../protocols/supercell/clashofclans/agql-dota2-webapi/index.html" title="AGQL - Valve - Dota 2 WebAPI"><span class="none"></span>AGQL - Valve - Dota 2 WebAPI</a></li>
    <li><a href="../protocols/valve/steam/agql-steam-master/index.html" title="AGQL - Valve - Steam Master Query"><span class="none"></span>AGQL - Valve - Steam Master Query</a></li>
    <li><a href="../protocols/supercell/clashofclans/agql-steam-webapi/index.html" title="AGQL - Valve - Steam Web API"><span class="none"></span>AGQL - Valve - Steam Web API</a></li>
    <li><a href="../agql/index.html" title="AGQL - Aggregate"><span class="none"></span>AGQL - Aggregate</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="../project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Maven" class="builtBy"><img class="builtBy"  alt="Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    /></a>
<a href="http://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="builtBy"><img class="builtBy"  alt="JProfiler" src="https://www.ej-technologies.com/images/product_banners/jprofiler_small.png"    /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Source_RCON"></a>Source RCON</h2>
<ol style="list-style-type: decimal">

<li><a href="#failsafe-features">Failsafe Features</a></li>
<li><a href="#examples">Examples</a>
<ol style="list-style-type: decimal">

<li><a href="#authentication">Authentication</a></li>
<li><a href="#commands">Commands</a></li>
<li><a href="#invalidating-credentials">Invalidating credentials</a></li>
<li><a href="#cleaning-up-active-connections">Cleanup Connections</a></li>
<li><a href="#display-connection-statistics">Display connection statistics</a></li>
<li><a href="#providing-your-own-custom-credentialsstore-implementation">Providing your own custom CredentialsStore implementation</a></li>
<li><a href="#compatibility-with-non-source-games">Compatibility with non-source games</a></li>
</ol>
</li>
</ol><section><section>
<h4><a name="About_this_module"></a>About this module</h4>
<ul>

<li>The rcon module maintains a pool of re-usable connections by default.</li>
<li>Connections are made on-demand. The maximum number of connections can be set via configuration.</li>
<li>Connections are guaranteed to be always authenticated, assuming that the registered credentials remain valid.</li>
<li>A connection that has not been used after a certain period of time will be considered as inactive. Inactive connections are dropped automatically by the library. You can change this behavior via configuration.</li>
<li>You only need to authenticate an address once via <code>authenticate(InetSocketAddress, byte[])</code>. The library will automatically authenticate new connections if needed.</li>
<li>Credentials are stored in the <code>CredentialsStore</code> (Default: <code>InMemoryCredentialsStore</code>). You can provide your own implementation via configuration.</li>
</ul></section><section>
<h4><a name="Failsafe_Features"></a>Failsafe Features</h4>
<p>List of failsafe features implemented on this module</p>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Policy</th>
<th>Options Class</th>
<th>Enabled by Default</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">Retry Policy</td>
<td>FailsafeOptions</td>
<td>Yes</td>
<td>A request is re-sent when a TimeoutException is thrown</td></tr>
<tr class="a">
<td align="left">Circuit Breaker Policy</td>
<td>FailsafeOptions</td>
<td>Yes</td>
<td>Fail-fast when a certain number of failures reach the specified threshold</td></tr>
</tbody>
</table></section><section>
<h4><a name="Examples"></a>Examples</h4>
<p><span style="color:red; text-transform: uppercase;"><b>REMEMBER</b></span> Avoid long running tasks within your completion handlers that will block the event-loop thread, doing so will potentially cause the application to hang indefinitely. Read more about coding best practices <a href="/introduction.html#best-practices">here</a>.</p>
<ul>

<li><code>SourceRconAuthResponse</code> is the response returned for authentication requests. Receiving this response object indicates that the server has responded normally. Use the <code>isAuthenticated()</code> getter method to check if the authentication was successful. If it returns <code>false</code>, then a reason code/message will be included in the response object.</li>
<li>A <code>SourceRconCmdResponse</code> is the response returned for command requests. Use the <code>getResult()</code> method to retrieve the result.</li>
<li>There are cases when the authentication request fails and the resulting future completes in error. If this happens, check the type of exception to determine the cause of the authentication failure. Below is the list of possible exceptions that are thrown in the event of an authentication failure.</li>
</ul>
<table border="0" class="table table-striped">
<thead>

<tr class="a">
<th>Type</th>
<th>Description</th></tr>
</thead><tbody>

<tr class="b">
<td align="left">RconMaxLoginAttemptsException</td>
<td>Thrown when the server has dropped the connection without responding and the maximum number of login attempts has been reached</td></tr>
<tr class="a">
<td align="left">RconInvalidCredentialsException</td>
<td>Thrown if the credentials is no longer valid. Reauthentication required.</td></tr>
<tr class="b">
<td align="left">RconNotYetAuthException</td>
<td>Thrown when a command request was attempted but the address has not yet been authenticated by the server</td></tr>
</tbody>
</table><section>
<h5><a name="Authentication"></a>Authentication</h5>
<p>Basic example of authenticating with the source server</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">class RconAuthExample {

    public static void main(String[] args) throws Exception {
        try (SourceRconClient client = new SourceRconClient()) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            SourceRconAuthResponse response = client.authenticate(address, password.getBytes()).join();
            //Check authenticated flag
            if (!response.isAuthenticated()) {
                System.err.printf(&quot;Failed to authenticate with server (Reason: %s, Code: %s)%n&quot;, response.getReason(), response.getReasonCode().name());
                return;
            }
            //do something here...
            System.out.println(&quot;Successfully authenticated with server&quot;);
        } catch (RconAuthException ex) {
            System.err.printf(&quot;Failed to authenticate with server (Reason: %s)%n&quot;, ex.getReason());
            ex.printStackTrace(System.err);
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Commands"></a>Commands</h5>
<p>Basic example of sending a command to a source server.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.net.InetSocketAddress;

class RconCmdExample {

    public static void main(String[] args) throws Exception {
        try (SourceRconClient client = new SourceRconClient()) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            //1. authenticate....
            //....
            //2. send command
            SourceRconCmdResponse response = client.execute(address, &quot;status&quot;).join();
            System.out.printf(&quot;Got response from server '%s': %s%n&quot;, response.getAddress(), response.getResult());
        } catch (RconException ex) {
            System.err.printf(&quot;Failed to authenticate with server (Reason: %s)%n&quot;, ex.getReason());
            ex.printStackTrace(System.err);
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Invalidating_Credentials"></a>Invalidating Credentials</h5>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.net.InetSocketAddress;

class RconCmdExample {

    public static void main(String[] args) throws Exception {
        try (SourceRconClient client = new SourceRconClient()) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            //1. authenticate....
            //....
            //2. send command
            SourceRconCmdResponse response = client.execute(address, &quot;status&quot;).join();
            System.out.printf(&quot;Got response from server '%s': %s%n&quot;, response.getAddress(), response.getResult());

            //invalidate only connections
            client.invalidate();

            //invalidate everything + credentials (this will require re-authentication)
            client.invalidate(false);
        } catch (RconException ex) {
            System.err.printf(&quot;Failed to authenticate with server (Reason: %s)%n&quot;, ex.getReason());
            ex.printStackTrace(System.err);
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Cleaning_up_active_connections"></a>Cleaning up active connections</h5>
<ul>

<li>Use <code>cleanup()</code> to only close inactive/unused connections (this is the same as <code>cleanup(false)</code>.</li>
<li>Use <code>cleanup(true)</code> to force close all connections.</li>
</ul>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">import java.net.InetSocketAddress;

class RconCmdExample {

    public static void main(String[] args) throws Exception {
        try (SourceRconClient client = new SourceRconClient()) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            //1. authenticate....
            //....
            //2. send command
            SourceRconCmdResponse response = client.execute(address, &quot;status&quot;).join();
            System.out.printf(&quot;Got response from server '%s': %s%n&quot;, response.getAddress(), response.getResult());

            //Cleanup only inactive connections
            client.cleanup();

            //force close all active connections
            client.cleanup(true);

            //calling execute will trigger a new connection and authentication request
            SourceRconCmdResponse res = client.execute(address, &quot;status&quot;).join();
            System.out.printf(&quot;Response: %s%n&quot;, res.getResult());
        } catch (RconException ex) {
            System.err.printf(&quot;Failed to authenticate with server (Reason: %s)%n&quot;, ex.getReason());
            ex.printStackTrace(System.err);
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Display_connection_statistics"></a>Display connection statistics</h5>
<ul>

<li><code>getStatistics()</code> generates metadata information on the active connections of the session.</li>
</ul>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">class ConnectionStatistics {

    public static void main(String[] args) throws Exception {
        try (SourceRconClient rconClient = new SourceRconClient()) {
            SetMultimap&lt;InetSocketAddress, SourceRconMessenger.ConnectionStats&gt; stats = rconClient.getStatistics();
            final Supplier&lt;Console.Colorize&gt; console = () -&gt; Console.colorize(true);
            int ctr = 1;
            for (InetSocketAddress address : stats.keySet()) {
                console.get().blue().text(&quot;-----------------------------------------------------------------------------------------------------------------------------------------------------------&quot;).println();
                console.get().blue().text(&quot;%02d)&quot;, ctr++).white().text(&quot; Address &quot;).reset().yellow().text(&quot;'%s'&quot;, address).println();
                console.get().blue().text(&quot;-----------------------------------------------------------------------------------------------------------------------------------------------------------&quot;).println();
                int connCtr = 1;
                for (SourceRconMessenger.ConnectionStats connStats : stats.get(address)) {
                    Console.Colorize con = console.get();
                    con
                            .purple(&quot;\t(%02d)&quot;, connCtr++).reset()
                            .cyan(&quot;\t[Connection Id]: &quot;).white(connStats.getConnectionId()).reset()
                            .cyan(&quot;\t[Local Address]: &quot;).white(connStats.getLocalAddress().toString()).reset()
                            .cyan(&quot;\t[Acquire Count]: &quot;).white(&quot;%03d&quot;, connStats.getAcquireCount()).reset()
                            .cyan(&quot;\t[Last Acquired]: &quot;).white(&quot;%s sec(s) ago&quot;, Time.getTimeDesc(connStats.getLastAcquiredMs(), true)).reset();

                    if (connStats.isAcquired()) {
                        con.cyan().text(&quot;\t[Is Acquired]: &quot;).reset().yellow().text(&quot;%s&quot;, connStats.isAcquired()).reset();
                    } else {
                        con.cyan().text(&quot;\t[Is Acquired]: &quot;).reset().green().text(&quot;%s&quot;, connStats.isAcquired()).reset();
                    }

                    if (connStats.isAuthenticated()) {
                        con.cyan(&quot;\t[Is Authenticated]: &quot;).reset().green(&quot;%s&quot;, connStats.isAuthenticated()).reset();
                    } else {
                        con.cyan(&quot;\t[Is Authenticated]: &quot;).reset().red(&quot;%s&quot;, connStats.isAuthenticated()).reset();
                    }

                    con.cyan(&quot;\t[Thread Name]: &quot;).reset()
                       .white(&quot;%s&quot;, connStats.getThreadName()).reset()
                       .println();
                }
            }
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Providing_your_own_custom_CredentialsStore_implementation"></a>Providing your own custom CredentialsStore implementation</h5>
<ul>

<li>Simply implement the <code>CredentialsStore</code> interface then pass it to the <code>SourceRconOptions.CREDENTIALS_STORE</code> option.</li>
</ul>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">class CustomCredentialsStoree {

    private final CredentialsStore credentialsStore = new CredentialsStore() {
        private final Map&lt;InetSocketAddress, Credentials&gt; credentials = new ConcurrentHashMap&lt;&gt;();

        @Override
        public Credentials get(InetSocketAddress address) {
            return credentials.get(address);
        }

        @Override
        public Credentials add(InetSocketAddress address, byte[] passphrase) {
            if (passphrase == null || passphrase.length == 0)
                throw new IllegalArgumentException(&quot;Passphrase cannot be null or empty&quot;);
            final Credentials newCredentials = new SourceRconCredentials(passphrase);
            final Credentials oldCredentials = credentials.put(address, newCredentials);
            if (oldCredentials != null) {
                oldCredentials.invalidate();
            }
            return newCredentials;
        }

        @Override
        public void remove(InetSocketAddress address) {
            credentials.remove(address);
        }

        @Override
        public void clear() {
            int size = credentials.size();
            credentials.clear();
        }

        @Override
        public boolean exists(InetSocketAddress address) {
            return credentials.containsKey(address);
        }
    };

    public static void main(String[] args) throws Exception {
        final SourceRconOptions options = SourceRconOptions.builder()
                                                           .option(SourceRconOptions.CREDENTIALS_STORE, credentialsStore)
                                                           .build();
        //Test authentication
        try (SourceRconClient rconClient = new SourceRconClient(options)) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            SourceRconAuthResponse response = rconClient.authenticate(address, password.getBytes()).join();
            //Check authenticated flag
            if (!response.isAuthenticated()) {
                System.err.printf(&quot;Failed to authenticate with server (Reason: %s, Code: %s)%n&quot;, response.getReason(), response.getReasonCode().name());
                return;
            }
            System.out.printf(&quot;Successfully authenticated with server: %s%n&quot;, address);
        }
    }
}
</code></pre></div></section><section>
<h5><a name="Compatibility_with_non-source_games"></a>Compatibility with non-source games</h5>
<p>In case of issues with the rcon module on non-source based games (e.g. Minecraft), you can try and set <code>SourceRconOptions.USE_TERMINATOR_PACKET</code> option to <code>false</code>.</p>
<p>Games such as <a class="externalLink" href="https://wiki.vg/RCON">Minecraft</a> does not support &#x201c;terminator packets&#x201d; as it does not echo back the <a class="externalLink" href="https://developer.valvesoftware.com/wiki/Source_RCON_Protocol#Multiple-packet_Responses">response packets</a> receives. So if the game server does not support this, then this configuration option should be <b>disabled</b>. A special heuristics will be used instead to determine the end of the response.</p>

<div class="source"><pre class="prettyprint linenums"><code class="language-java">class NonSourceBasedGames {

    public static void main(String[] args) throws Exception {
        //in case 
        final SourceRconOptions options = SourceRconOptions.builder()
                                                           .option(SourceRconOptions.USE_TERMINATOR_PACKET, false)
                                                           .build();
        //Test authentication
        try (SourceRconClient rconClient = new SourceRconClient(options)) {
            InetSocketAddress address = new InetSocketAddress(&quot;192.168.1.10&quot;, 27015);
            SourceRconAuthResponse response = rconClient.authenticate(address, password.getBytes()).join();
            //Check authenticated flag
            if (!response.isAuthenticated()) {
                System.err.printf(&quot;Failed to authenticate with server (Reason: %s, Code: %s)%n&quot;, response.getReason(), response.getReasonCode().name());
                return;
            }
            System.out.printf(&quot;Successfully authenticated with server: %s%n&quot;, address);

            SourceRconCmdResponse res = rconClient.execute(address, &quot;echo Hi&quot;).join();
            System.out.printf(&quot;Response: %s%n&quot;, res.getResult());
        }
    }

}
</code></pre></div></section></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
<p>Site Chain Logo - By Mdowdell (Own work) [CC BY-SA 3.0 (http://creativecommons.org/licenses/by-sa/3.0)], via Wikimedia Commons</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
